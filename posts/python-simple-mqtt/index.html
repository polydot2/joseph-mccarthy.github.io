<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Python Simple MQTT</title>
<link rel=stylesheet href=/css/style.css>
</head>
<body>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=description content>
<meta name=author content>
<title>Joe McCarthy</title>
<link rel=icon type=image/x-icon href=/favicon.ico>
<script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/all.min.js integrity="sha512-naukR7I+Nk6gp7p5TMA4ycgfxaZBJ7MO5iC3Fp6ySQyKFHOGfpkSZkYVWV5R7u7cfAicxanwYQ5D1e17EfJcMA==" crossorigin=anonymous referrerpolicy=no-referrer></script> <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet type=text/css>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel=stylesheet type=text/css>
<link href=/css/style.css rel=stylesheet>
<link href=/css/syntax.css rel=stylesheet>
</head>
<body id=page-top>
<nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id=mainNav>
<div class=container>
<a class=navbar-brand href=/>Joe McCarthy</a>
<button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type=button data-bs-toggle=collapse data-bs-target=#navbarResponsive aria-controls=navbarResponsive aria-expanded=false aria-label="Toggle navigation">
Menu
<em class="fas fa-bars"></em>
</button>
<div class="collapse navbar-collapse" id=navbarResponsive>
<ul class="navbar-nav ms-auto">
<li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href=https://joseph-mccarthy.github.io/posts/> Posts </a>
<li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href=https://joseph-mccarthy.github.io/projects/> Projects </a>
</ul>
</div>
</div>
</nav>
<header class="masthead2 text-white text-center"></header>
<div class="container pb-5">
<div class=row>
<section class="page-section portfolio col-12 col-lg-10">
<img class=card-img-top src=https://joseph-mccarthy.github.io/posts/python-simple-mqtt/hero.png alt>
<h2 class="page-section-heading text-center text-uppercase text-secondary mt-5">Python Simple MQTT</h2>
<div class="divider-custom m-0">
<div class=divider-custom-line></div>
<div class=divider-custom-icon><em class="fas fa-star"></em></div>
<div class=divider-custom-line></div>
</div>
<div class="row mb-3">
<div class="col text-center text-nowrap">
<a class=h4 href=/tags/module/ title=Module><span class="badge bg-primary p-2 m-1">Module</span></a>
<a class=h4 href=/tags/mqtt/ title=MQTT><span class="badge bg-primary p-2 m-1">MQTT</span></a>
<a class=h4 href=/tags/python/ title=Python><span class="badge bg-primary p-2 m-1">Python</span></a>
</div>
</div>
<div class="row justify-content-left">
<p>I&rsquo;m starting to use Raspberry Pi for a lot of simple tasks around the home and give me notfications. So I thought it was about time to look into message brokers and MQTT is the way to go. So instead of just throwing the implmentation into a project of mine. I thought it would be more useful to create a seriously simple example project that just publishes a random number to a topic and another that subscribes to it. The two files publish.py and subscribe.py are both heavily commented with what basically each line is doing. So it&rsquo;s simple to follow. The source code is avaliable on my <a href=https://github.com/joseph-mccarthy/simple-python-mqtt-example><strong>GitHub</strong></a>.</p>
<h2 id=brokers>Brokers</h2>
<p>In order to publish and subscribe to messages you&rsquo;ll require a broker. The code examples are currently set to use a free example from HiveMQ. If you are going to use HiveMQ free public broker <strong>please remember that it&rsquo;s public and don&rsquo;t share sensitive information</strong>. I&rsquo;m personally using <a href=https://github.com/eclipse/mosquitto><strong>Mosquitto</strong></a> as my broker on the network, running on a Raspberry Pi (Obviously).</p>
<h3 id=installing-mosquitto-raspberry-pi>Installing Mosquitto (Raspberry Pi)</h3>
<p>Mosquitto is already avaliable in the standard distribution so it&rsquo;s just a case of:</p>
<script src=https://gist.github.com/joseph-mccarthy/ae83cd289979371a8fb6cbb4d0733577.js></script>
<p>This will default to always be running using port <strong>1883</strong>. That&rsquo;s all the set up that I needed to get this demo working, although the <a href=https://mosquitto.org/documentation/><strong>documentation</strong></a> is great for Mosquitto.</p>
<div class="row mt-5 mb-3">
<div class="col-6 text-left">
<a class="btn btn-primary btn-lg col-12" href=https://joseph-mccarthy.github.io/posts/network-domain-and-nginx/><span class=h1>&#8592;</span></a>
</div>
<div class="col-6 text-right">
<a class="btn btn-primary btn-lg col-12" href=https://joseph-mccarthy.github.io/posts/free-lancer-in-themes-library/><span class=h1>&#8594;</span></a>
</div>
</div>
</div> </section>
<section class="page-section portfolio col-12 col-lg-2 my-3">
<div id=sidebar class=fixed>
<div class="widget pt-3">
<h4 class="mb-3 widget-title">Latest Posts</h4>
<ul class=list-unstyled>
<li class="d-flex my-1">
<a href=https://joseph-mccarthy.github.io/posts/network-domain-and-nginx/>
<h5>Network Domain and Nginx</h5>
</a>
</li>
<li class="d-flex my-1">
<a href=https://joseph-mccarthy.github.io/posts/free-lancer-in-themes-library/>
<h5>Free Lancer in Themes Library</h5>
</a>
</li>
<li class="d-flex my-1">
<a href=https://joseph-mccarthy.github.io/posts/harlow-bindicator/>
<h5>Harlow Bindicator</h5>
</a>
</li>
</ul>
</div>
<div class="widget pt-3">
<h4 class="mb-3 widget-title">Related Posts</h4>
<ul class=list-unstyled>
<li class="d-flex my-1">
<a href=https://joseph-mccarthy.github.io/posts/python-suntime-module/>
<h5>Python Suntime Module</h5>
</a>
</li>
<li class="d-flex my-1">
<a href=https://joseph-mccarthy.github.io/posts/harlow-bindicator/>
<h5>Harlow Bindicator</h5>
</a>
</li>
<li class="d-flex my-1">
<a href=https://joseph-mccarthy.github.io/posts/new-project-light-meter-py/>
<h5>New Project Light Meter Py</h5>
</a>
</li>
</ul>
</div>
</div>
</section>
</div>
</div>
<footer class="footer text-center">
<div class=container>
<div class=row>
<div class="col-lg-4 mb-5 mb-lg-0">
<h4 class="text-uppercase mb-4">Location</h4>
<p class="lead mb-0">
Harlow, Essex
<br>
United Kingdom
</p>
</div>
<div class="col-lg-4 mb-5 mb-lg-0">
<h4 class="text-uppercase mb-4">Around the Web</h4>
<a class="btn btn-outline-light btn-social mx-1" href=https://github.com/joseph-mccarthy target=_blank><em class="fab fa-fw fa-github"></em></a>
</div>
<div class=col-lg-4>
<h4 class="text-uppercase mb-4">About Freelancer</h4>
<p class="lead mb-0">
Freelance is a free to use, MIT licensed Bootstrap theme created by
<a href=http://startbootstrap.com>Start Bootstrap</a>
</p>
</div>
</div>
</div>
</footer>
<div class="copyright py-4 text-center text-white">
<div class=container><small>Copyright &copy; Joe McCarthy 2022</small></div>
</div>
<script src=https://cdn.startbootstrap.com/sb-forms-latest.js></script>
</body>
<div class="portfolio-modal modal fade" id=modal1 tabindex=-1 aria-labelledby=modal1 aria-hidden=true>
<div class="modal-dialog modal-xl">
<div class=modal-content>
<div class="modal-header border-0"><button class=btn-close type=button data-bs-dismiss=modal aria-label=Close></button></div>
<div class="modal-body text-center pb-5">
<div class=container>
<div class="row justify-content-center">
<div class=col-lg-8>
<h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">Hugo Freelance</h2>
<div class=divider-custom>
<div class=divider-custom-line></div>
<div class=divider-custom-icon><em class="fas fa-star"></em></div>
<div class=divider-custom-line></div>
</div>
<img class="img-fluid rounded mb-5" src=/projects/hugo-freelance/hero.png alt=...>
<p class=mb-4>I wanted to use Hugo and I wanted Bootstrap Freelance. So here it is.</p>
<a href=https://joseph-mccarthy.github.io/projects/hugo-freelance/ class="btn btn-primary btn-lg col-12">Read More</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="portfolio-modal modal fade" id=modal2 tabindex=-1 aria-labelledby=modal2 aria-hidden=true>
<div class="modal-dialog modal-xl">
<div class=modal-content>
<div class="modal-header border-0"><button class=btn-close type=button data-bs-dismiss=modal aria-label=Close></button></div>
<div class="modal-body text-center pb-5">
<div class=container>
<div class="row justify-content-center">
<div class=col-lg-8>
<h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">Internet Monitor</h2>
<div class=divider-custom>
<div class=divider-custom-line></div>
<div class=divider-custom-icon><em class="fas fa-star"></em></div>
<div class=divider-custom-line></div>
</div>
<img class="img-fluid rounded mb-5" src=/projects/internet-monitor/hero.png alt=...>
<p class=mb-4>Small and simple application to keep my ISP honest.</p>
<a href=https://joseph-mccarthy.github.io/projects/internet-monitor/ class="btn btn-primary btn-lg col-12">Read More</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</html>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js integrity=sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa crossorigin=anonymous></script>
<script src=/js/scripts.js></script>
</body>
</html>